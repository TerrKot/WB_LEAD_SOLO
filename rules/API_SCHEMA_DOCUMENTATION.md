# Документация API Wildberries v4 - Структура данных товара

## Общая информация

- **API версия**: v4
- **Endpoint**: `https://u-card.wb.ru/cards/v4/list`
- **Формат данных**: JSON
- **Всего полей**: 58 уникальных полей

## Важные замечания

1. **Цены указаны в копейках** - для получения рублей нужно делить на 100
2. **Все поля могут быть пустыми** - `null`, пустая строка `""` или пустой массив `[]` в зависимости от товара
3. **Поля volume и weight** могут отсутствовать у товаров без габаритов (например, одежда)
4. **Поле sizes** всегда присутствует и содержит хотя бы один элемент
5. **Поле colors** может быть пустым массивом

## Структура товара

### Основные поля (корневой уровень)

#### id
- **Тип**: `integer`
- **Описание**: Артикул товара (nmId) - уникальный идентификатор
- **Обязательное**: Да
- **Может быть пустым**: Нет
- **Пример**: `242813573`

#### name
- **Тип**: `string`
- **Описание**: Название товара
- **Обязательное**: Да
- **Может быть пустым**: Нет
- **Пример**: `"Рюкзак городской повседневный для ноутбука"`

#### brand
- **Тип**: `string`
- **Описание**: Название бренда
- **Обязательное**: Да
- **Может быть пустым**: Да (пустая строка)
- **Пример**: `"DELOV-TO"`

#### brandId
- **Тип**: `integer`
- **Описание**: ID бренда
- **Обязательное**: Да
- **Может быть пустым**: Нет
- **Пример**: `311467942`

#### siteBrandId
- **Тип**: `integer`
- **Описание**: ID бренда на сайте (может быть 0)
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `0`

#### supplier
- **Тип**: `string`
- **Описание**: Название поставщика
- **Обязательное**: Да
- **Может быть пустым**: Нет
- **Пример**: `"DELOV-TO"`

#### supplierId
- **Тип**: `integer`
- **Описание**: ID поставщика
- **Обязательное**: Да
- **Может быть пустым**: Нет
- **Пример**: `4161341`

#### supplierRating
- **Тип**: `number`
- **Описание**: Рейтинг поставщика (0-5)
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `4.9`

#### supplierFlags
- **Тип**: `integer`
- **Описание**: Флаги поставщика (битовая маска)
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `7424`

#### rating
- **Тип**: `integer`
- **Описание**: Рейтинг товара (0-5)
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `5`

#### reviewRating
- **Тип**: `integer` или `number`
- **Описание**: Рейтинг отзывов (0-5)
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `4.9`

#### nmReviewRating
- **Тип**: `integer` или `number`
- **Описание**: Рейтинг отзывов по nmId (0-5)
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `4.9`

#### feedbacks
- **Тип**: `integer`
- **Описание**: Количество отзывов
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `1030`

#### nmFeedbacks
- **Тип**: `integer`
- **Описание**: Количество отзывов по nmId
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `1030`

#### pics
- **Тип**: `integer`
- **Описание**: Количество фотографий товара
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `27`

#### volume
- **Тип**: `integer`
- **Описание**: Объем товара в литрах (для товаров с габаритами)
- **Обязательное**: Нет
- **Может быть пустым**: Да (часто отсутствует у одежды)
- **Пример**: `138`

#### weight
- **Тип**: `number`
- **Описание**: Вес товара в килограммах
- **Обязательное**: Нет
- **Может быть пустым**: Да (часто отсутствует у одежды)
- **Пример**: `1.307`

#### totalQuantity
- **Тип**: `integer`
- **Описание**: Общее количество товара на складе
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `41`

#### subjectId
- **Тип**: `integer`
- **Описание**: ID категории товара
- **Обязательное**: Да
- **Может быть пустым**: Нет
- **Пример**: `138`

#### subjectParentId
- **Тип**: `integer`
- **Описание**: ID родительской категории
- **Обязательное**: Да
- **Может быть пустым**: Нет
- **Пример**: `3`

#### entity
- **Тип**: `string`
- **Описание**: Тип товара (сущность)
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `"рюкзаки"`

#### matchId
- **Тип**: `integer`
- **Описание**: ID совпадения (для группировки похожих товаров)
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `2119133`

#### sort
- **Тип**: `integer`
- **Описание**: Параметр сортировки
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `14067`

#### time1
- **Тип**: `integer`
- **Описание**: Время доставки 1 (дни) на уровне товара
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `2`

#### time2
- **Тип**: `integer`
- **Описание**: Время доставки 2 (дни) на уровне товара
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `22`

#### wh
- **Тип**: `integer`
- **Описание**: ID склада на уровне товара
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `120762`

#### dtype
- **Тип**: `integer`
- **Описание**: Тип доставки на уровне товара (битовая маска)
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `6597069766657`

#### dist
- **Тип**: `integer`
- **Описание**: Расстояние до склада
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `96`

#### root
- **Тип**: `integer`
- **Описание**: Root ID (идентификатор корневой категории)
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `218180416`

#### kindId
- **Тип**: `integer`
- **Описание**: Kind ID (тип товара)
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `1`

#### viewFlags
- **Тип**: `integer`
- **Описание**: Флаги отображения (битовая маска)
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `128`

#### panelPromoId
- **Тип**: `integer`
- **Описание**: ID промо-панели (для акций и промо)
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `1019179`

#### isNew
- **Тип**: `boolean`
- **Описание**: Флаг нового товара
- **Обязательное**: Нет
- **Может быть пустым**: Да
- **Пример**: `true`

### Вложенные структуры

#### colors[] - Массив цветов товара

Массив объектов, описывающих доступные цвета товара. Может быть пустым.

**Структура элемента массива:**

##### colors[].id
- **Тип**: `integer`
- **Описание**: ID цвета
- **Может быть пустым**: Да
- **Пример**: `0`

##### colors[].name
- **Тип**: `string`
- **Описание**: Название цвета
- **Может быть пустым**: Да
- **Пример**: `"черный"`

**Пример:**
```json
"colors": [
  {
    "id": 0,
    "name": "черный"
  },
  {
    "id": 16777215,
    "name": "белый"
  }
]
```

#### sizes[] - Массив размеров товара

**ВАЖНО**: Это поле всегда присутствует и содержит хотя бы один элемент.

**Структура элемента массива:**

##### sizes[].name
- **Тип**: `string`
- **Описание**: Название размера
- **Может быть пустым**: Да (часто пустая строка)
- **Пример**: `""` или `"54-60"`

##### sizes[].origName
- **Тип**: `string`
- **Описание**: Оригинальное название размера
- **Может быть пустым**: Да
- **Пример**: `"0"` или `"54-60"`

##### sizes[].rank
- **Тип**: `integer`
- **Описание**: Ранг размера (порядок сортировки)
- **Может быть пустым**: Да
- **Пример**: `0`

##### sizes[].optionId
- **Тип**: `integer`
- **Описание**: ID опции размера
- **Может быть пустым**: Нет
- **Пример**: `381153028`

##### sizes[].wh
- **Тип**: `integer`
- **Описание**: ID склада для данного размера
- **Может быть пустым**: Да
- **Пример**: `120762`

##### sizes[].time1
- **Тип**: `integer`
- **Описание**: Время доставки 1 (дни) для данного размера
- **Может быть пустым**: Да
- **Пример**: `2`

##### sizes[].time2
- **Тип**: `integer`
- **Описание**: Время доставки 2 (дни) для данного размера
- **Может быть пустым**: Да
- **Пример**: `22`

##### sizes[].dtype
- **Тип**: `integer`
- **Описание**: Тип доставки (битовая маска) для данного размера
- **Может быть пустым**: Да
- **Пример**: `6597069766664`

##### sizes[].price - Объект с информацией о цене

**ВАЖНО**: Цены указаны в копейках!

###### sizes[].price.basic
- **Тип**: `integer`
- **Описание**: Базовая цена в копейках (цена без скидки)
- **Может быть пустым**: Да
- **Пример**: `704500` (7045.00 руб.)

###### sizes[].price.product
- **Тип**: `integer`
- **Описание**: Цена товара в копейках (цена со скидкой)
- **Может быть пустым**: Да
- **Пример**: `202300` (2023.00 руб.)

###### sizes[].price.logistics
- **Тип**: `integer`
- **Описание**: Стоимость логистики в копейках
- **Может быть пустым**: Да
- **Пример**: `0`

###### sizes[].price.return
- **Тип**: `integer`
- **Описание**: Стоимость возврата в копейках
- **Может быть пустым**: Да
- **Пример**: `0`

##### sizes[].saleConditions
- **Тип**: `integer`
- **Описание**: Условия продажи (битовая маска)
- **Может быть пустым**: Да
- **Пример**: `134217728`

##### sizes[].payload
- **Тип**: `string`
- **Описание**: Дополнительные данные в закодированном виде (base64)
- **Может быть пустым**: Да
- **Пример**: `"A6sZ9g1vdgdey97Fh263+d4PZcvFLVVAfus5v9ofvfPnTsjsFj/ocQLFBj/IZ/FbS0gqvB+LpKsm5FruIRpbXpsH2HHMRyiMbwFuPz8C+nVRN9Xu6gi6JO1l2ZQFgYgEyAbvHENaeJh2vAcM2EuRjSxXXqFdIKVi3ZZ+U4hyUa+4mH7aryXaB/qrNuDQTEZoPf4GHtv9wG8nYOkHnegv+dGNdEtaR25XL8aZyZemz+A"`

**Пример:**
```json
"sizes": [
  {
    "name": "",
    "origName": "0",
    "rank": 0,
    "optionId": 381153028,
    "wh": 120762,
    "time1": 2,
    "time2": 20,
    "dtype": 6597069766664,
    "price": {
      "basic": 704500,
      "product": 209700,
      "logistics": 0,
      "return": 0
    },
    "saleConditions": 134217728,
    "payload": "..."
  }
]
```

#### meta - Метаданные товара

##### meta.tokens
- **Тип**: `array`
- **Описание**: Токены для дополнительных данных (обычно пустой массив)
- **Может быть пустым**: Да
- **Пример**: `[]`

**Пример:**
```json
"meta": {
  "tokens": []
}
```

## Категории полей

### Обязательные поля (всегда присутствуют)
- `id`
- `name`
- `brand`
- `brandId`
- `supplier`
- `supplierId`
- `sizes`
- `subjectId`
- `subjectParentId`

### Часто присутствующие поля
- `rating`
- `feedbacks`
- `pics`
- `colors`
- `volume`
- `weight`
- `totalQuantity`

### Опциональные поля
- `supplierRating`
- `supplierFlags`
- `reviewRating`
- `nmReviewRating`
- `nmFeedbacks`
- `entity`
- `matchId`
- `meta`
- `panelPromoId`
- `isNew`
- `sort`
- `time1`
- `time2`
- `wh`
- `dtype`
- `dist`
- `root`
- `kindId`
- `viewFlags`

## Пример полной структуры товара

```json
{
  "id": 242813573,
  "name": "Рюкзак городской повседневный для ноутбука",
  "brand": "DELOV-TO",
  "brandId": 311467942,
  "siteBrandId": 0,
  "supplier": "DELOV-TO",
  "supplierId": 4161341,
  "supplierRating": 4.9,
  "supplierFlags": 12224,
  "rating": 5,
  "reviewRating": 4.9,
  "nmReviewRating": 4.9,
  "feedbacks": 1038,
  "nmFeedbacks": 1038,
  "pics": 27,
  "volume": 138,
  "weight": 1.307,
  "totalQuantity": 43,
  "colors": [
    {
      "id": 0,
      "name": "черный"
    }
  ],
  "sizes": [
    {
      "name": "",
      "origName": "0",
      "rank": 0,
      "optionId": 381153028,
      "wh": 120762,
      "time1": 2,
      "time2": 20,
      "dtype": 6597069766664,
      "price": {
        "basic": 704500,
        "product": 209700,
        "logistics": 0,
        "return": 0
      },
      "saleConditions": 134217728,
      "payload": "..."
    }
  ],
  "subjectId": 138,
  "subjectParentId": 3,
  "entity": "рюкзаки",
  "matchId": 2119133,
  "sort": 22086,
  "time1": 2,
  "time2": 20,
  "wh": 120762,
  "dtype": 6597069766664,
  "dist": 96,
  "root": 218180416,
  "kindId": 1,
  "viewFlags": 1679504,
  "panelPromoId": 1019179,
  "isNew": null,
  "meta": {
    "tokens": []
  }
}
```

## Примечания по использованию

1. При парсинге всегда проверяйте наличие полей перед использованием
2. Для цен используйте деление на 100: `price_rub = price_kop / 100`
3. Поле `sizes` всегда содержит хотя бы один элемент
4. Поля `volume` и `weight` могут отсутствовать у некоторых категорий товаров
5. Массив `colors` может быть пустым
6. Все числовые поля могут быть `null`, строковые - пустыми строками `""`

